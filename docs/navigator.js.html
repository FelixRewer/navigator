<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: navigator.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <script src="https://unpkg.com/ionicons@4.2.2/dist/ionicons.js"></script>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

    <div id="main">

        <h1 class="page-title">Navigator Docs</h1>
        <h2 class="subtitle">Source: navigator.js</h2>



        <a class="back" href="navigator.html">
            <ion-icon name="arrow-back"></ion-icon>Back
        </a>


        <section>
            <article>
                <pre class="prettyprint source linenums"><code>/**
 * Navigator - A JS Single-Page Library
 * @author Felix Rewer &lt;felix@rewer.com>
 * @copyright Felix Rewer 2018
 * @version 2.0
 * @license GPL-v3 LICENSE.md
 */

'use strict';

/**
 * Navigator Class
 * @class
 */
export class navigator {
    /**
     * @desc Constructor
     * @constructs navigator
     * @param {Object} confObj - Configuration Object
     * @param {string} confObj.root - Root folder
     * @param {string} confObj.links - Selector for NavLinks
     * @param {string} confObj.output - Selector for the output
     * @param {string} confObj.standard - Standard NavURL
     * @param {string} [confObj.extension=html] - File extension for navigations (e.g. php)
     */
    constructor(confObj) {
        this.root = confObj.root;
        this.links = confObj.links;
        this.extension = confObj.extension || 'html';

        document.addEventListener('DOMContentLoaded', () => {
            this.output = document.querySelector(confObj.output);
            this.navLinks(document.querySelectorAll(this.links));

            window.location.pathname === '/' ?
                this.navigate(confObj.standard) :
                this.navigate(window.location.pathname, window.location.search);
        });

        window.addEventListener('popstate', () => {
            this.navigate(window.history.state.page);
        });
    }

    /**
     * @func
     * @desc NavLinks initialization
     * @param {NodeListOf&lt;HTMLElemen>} navLinksList - List with all NavLinks
     */
    navLinks(navLinksList) {
        Array.from(navLinksList).forEach(el => {
            el.addEventListener('click', e => {
                e.preventDefault();
                var navURL = el.getAttribute('href');

                var state = {
                    page: navURL,
                    host: window.location.host,
                    port: window.location.port
                };
                window.history.pushState(state, navURL, navURL);

                this.navigate(navURL);
            });
        });
    };

    /**
     * @func
     * @desc Navigate by URL
     * @param {string} navURL - URL to Navigate (e.g. /start)
     * @param {string} navURLSearchParams - SearchParams to attach to URL (e.g. ?id=1)
     * @async
     */
    navigate(navURL, navURLSearchParams = false) {
        var navArray = navURL.split('?');
        navURL = navArray[0];
        navURLSearchParams =
            navArray[1] === undefined ? navURLSearchParams : '?' + navArray[1];

        fetch(
                navURLSearchParams ?
                `${this.root}${navURL}/index.${this.extension}${navURLSearchParams}` :
                `${this.root}${navURL}/index.${this.extension}`
            )
            .then(response => response.text())
            .then(text => {
                this.output.innerHTML = text;
                this.navLinks(this.output.querySelectorAll(this.links));
            })
            .catch(error => {
                throw new Error(error);
            });
    };
}</code></pre>
            </article>
        </section>




    </div>

    <br class="clear" />

    <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Sep 12 2018
        19:55:09 GMT+0200 (GMT+02:00)
    </footer>

    <script>
        prettyPrint();
    </script>
    <script src="scripts/linenumber.js"> </script>
</body>

</html>